# /webapps/erd-ecosystem/devops/k8s/overlays/local/patch-env-secrets.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: pmbok-backend-deployment
spec:
  template:
    spec:
      containers:
        - name: pmbok-backend
          env:
            # HOST: Coincide con namePrefix(local-) + Service(postgres-service)
            - name: DB_HOST 
              value: "local-postgres-service"
            - name: DB_PORT
              value: "5432"
            - name: DB_SSLMODE
              value: "disable"
            - name: DJANGO_DEBUG
              value: "1"
            - name: SECRET_KEY
              value: "django-insecure-local-key-for-dev-environment-only"
          # ðŸ‘‡ MAGIA: Inyecta DB_USER, DB_PASSWORD y DB_NAME automÃ¡ticamente desde el componente
          envFrom:
            - secretRef:
                name: postgres-secrets
