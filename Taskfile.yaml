# /webapps/erd-ecosystem/apps/pmbok/Taskfile.yaml
version: '3'

includes:
  backend:
    taskfile: backend/Taskfile.yaml
    dir: backend

  frontend:
    taskfile: frontend/Taskfile.yaml
    dir: frontend

tasks:
  # --- META TAREAS (App Level) ---
  default:
    desc: "Muestra las tareas disponibles"
    cmds:
      - task --list

  ci:
    desc: "ğŸ” Ejecutar CI completo de la App (Backend + Frontend)"
    cmds:
      - echo "ğŸ [PMBOK] Iniciando CI Completo..."
      - task: install-ci
      - task: test
      - echo "âœ… [PMBOK] CI Finalizado con Ã©xito."

  install-ci:
    desc: "ğŸ“¦ Instalar dependencias de todos los servicios (Modo CI)"
    cmds:
      - echo "ğŸ“¦ Instalando dependencias BACKEND (CI)..."
      - task: backend:install-ci
      - echo "ğŸ“¦ Instalando dependencias FRONTEND (CI)..."
      - task: frontend:install-ci

  test:
    desc: "ğŸ§ª Ejecutar pruebas de todos los servicios"
    cmds:
      - echo "ğŸš€ Iniciando pruebas del BACKEND..."
      - task: backend:test
      - echo "-----------------------------------"
      - echo "ğŸš€ Iniciando pruebas del FRONTEND..."
      - task: frontend:test
      - echo "âœ… Â¡Todas las pruebas finalizaron con Ã©xito!"